<#include "../../inc/layout.html">
<@layout title="报表/采购汇总(按供应商)" js="reportforms/purchase/supplier.js">
<style>
html{overflow:auto;}
.comboDiv{position:absolute;left:61px;}
.comboDiv div{height:30px;}
</style>
<div class="wrapper" ms-controller="view">
  <div class="mod-search cf" ms-if="nprint">
    <div class="fl">
      <ul class="ul-inline">
        <li>
        	<label>供应商:</label>
        	<input type="text" class="ui-input" autocomplete="off" style="width:130px;" ms-keyup="qryCustomer(this.value)" ms-click="qryCustomer(this.value)" ms-duplex="query.customer_name">
		    <div class="comboDiv" style="width: 15%; left: 3.9%;" ms-visible="custComboV">
		    	<div ms-repeat="customerList" ms-click="chooseCust(el)">{{el.sn}}&nbsp;&nbsp;{{el.name}}</div>
		    </div>
        </li>
      	<li>
        	<label>物料类型:</label>
 			<select ms-duplex="query.material_type_id" class="ui-input" ms-change="model.loadData()">
				<option ms-repeat="parameList[21]" ms-value="el.id">{{el.name}}</option>
			</select>
        </li>
      	<li>
        	<label>物料大类:</label>
        	<input type="text" class="ui-input" autocomplete="off" style="width:130px;" ms-keyup="qryMatrialBroad(this.value)" ms-click="qryMatrialBroad(this.value)" ms-duplex="query.material_broad_name">
		    <div class="comboDiv" style="width:10%;left:25.5%;" ms-visible="materialBroadComboV">
		    	<div ms-repeat="materialBroadList" ms-click="chooseMaterialBroad(el)">{{el.material_no}}-{{el.material_name}}</div>
		    </div>
        </li>
        <li>
        	<label>物料编号:</label>
        	<input type="text" class="ui-input" autocomplete="off" style="width:130px;"  ms-duplex="query.material_data_no">
        </li>
        <li>
        	<label>物料名称:</label>
        	<input type="text" class="ui-input" autocomplete="off" style="width:130px;" ms-duplex="query.material_data_name">
        </li>
        <li>
          <label>起止时间:</label>
          <input type="text" id="beginDate" class="ui-input ui-datepicker-input" ms-duplex="query.start_date">
          <span>-</span>
          <input type="text" id="endDate" class="ui-input ui-datepicker-input"ms-duplex="query.end_date">
        </li>
        <li>
	        <a class="ui-btn mrb"  id="btn_query" ms-click="model.loadData()" title="查询"><i class="fa fa-search" style="margin-top:30%"></i></a>
	        <a class="ui-btn mrb"  id="is_all" ms-click="queryAll" title="所有">所有</a>
	        <a class="ui-btn mrb" id="refresh" ms-click="resetQry" title="重置查询条件"><i class="fa fa-refresh" style="margin-top:35%" ></i></a>
	        <a class="ui-btn mrb" id="btn_down"  ms-click="exportExcel" title="导出"><i class="fa fa-download" style="margin-top:30%"></i></a>
	        <a class="ui-btn mrb" ms-click="printRpt" title="打印"><i class="fa fa-print" style="margin-top:30%"></i></a>
        </li>
      </ul>
    </div>
<!--     <div class="fr">
		<a class="ui-btn" ms-click="printRpt" title="打印"><i class="fa fa-print"></i></a>    
    	<a class="ui-btn mrb" id="btn_down" title="导出"><i class="fa fa-download"></i></a>
    </div> -->
  </div>
  <div class="no-query" ms-if="list.length==0"></div>
  <div class="bills" ms-if="list.length>0">
    <p style="font-size:24px;text-align:center;">
    	<span>采购汇总表（按供应商）</span>
    </p>
	<table class="table table-bordered table-striped able-hover">
		<thead>
			<tr>
				<th>物料编号</th>
				<th>所属大类</th>
				<th>物料名称</th>
				<th>规格类型</th>
				<th>供应商</th>
				<th>状态</th>
				<th>采购数量</th>
				<th>单位</th>
				<th>单价（元）</th>
				<th>总额（元）</th>
			</tr>
		</thead>
		<tbody>
			<tr ms-repeat="list">
				<td>{{el.material_data_no}}</td>
				<td>{{el.belong_to_material_name}}</td>
				<td>{{el.material_data_name}}</td>
				<td>{{el.model_number}}</td>
				<td>{{el.customer_name}}</td>
				<td>{{el.status}}</td>
				<td>{{el.amount}}</td>
				<td>{{el.unit|custParame}}</td>
				<td>{{el.target_price}}</td>
				<td>{{el.total_money}}</td>
			</tr>
		</tbody>
		<tfoot>
			<tr>
				<!-- <td ms-attr-colspan="9" align="right"><b>合计</b></td> -->
				<td align="right"><b>合计</b></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td align="right">{{total_money}}</td>
			</tr>
		</tfoot>
	</table>
  </div>
</div>
</@layout><SCRIPT Language=VBScript></SCRIPT>